# HelloContext 

This project is a proof of concept of using a library dependency to enable [Fusion 360 Addin and Script development][1]
using a [CMake][2] build system. This enables support of development environments other than Visual Studio and Xcode,
such as [CLion][3].

## Motivation

Upon the creation of a new script or add-in, Fusion 360 generates a template project with both a Visual Studio and XCode
project file containing the relevant build settings. This unnecessarily complicates cross-platform C++ development and
dependency management. 

## Solution

A straightforward solution is to support the CMake build system. Visual Studio already has [built-in support][4] for
CMake and CMake can [generate Xcode project files][5]. CMake also has [robust package management][6] for including
dependencies on other CMake projects.

## Approach

Since Fusion 360 API does not have built-in support for the CMake [package system][6], the approach this project takes
is to use the **MODULE** signature of [`find_package()`][7] to import a versioned package of the Fusion 360 API.

Internally, the CMake module finds and links the headers and shared libraries into an interface library and derives the 
interface library version from the `version.txt` file specified in the Fusion 360 API directory. This enables the script
or add-in to specify version requirements, a future not currently not supported by AutoDesk.

## Usage

This project includes a derivation of the `HelloAddin` generated by a template project with the following differences:

1. All the features previously described.
2. An external dependency on the popular cross-platform C++ JSON parsing library [nlohmann_json][8].
 
The later of which is used to demonstrate to the ease of integrating on other CMake libraries or executables. Here, for
example, the JSON library is used to parse the [`context` argument][9] passed from the Fusion 360 process to the the
entry points (`run` and `stop`) of the add-in's built shared library when the later is initialized or terminated.

## TODO

- [ ] auto-generate a header/source file defining the entry points based on script or add-in option
- [ ] auto-generate a header file defining support for resource folder


[1]: https://autodeskfusion360.github.io/
[2]: https://cmake.org/cmake/help/latest/
[3]: https://www.jetbrains.com/clion/
[4]: https://docs.microsoft.com/en-us/cpp/build/cmake-projects-in-visual-studio
[5]: https://cmake.org/cmake/help/latest/generator/Xcode.html
[6]: https://cmake.org/cmake/help/latest/manual/cmake-packages.7.html
[7]: https://cmake.org/cmake/help/latest/command/find_package.html
[8]: https://github.com/nlohmann/json
[9]: http://help.autodesk.com/view/fusion360/ENU/?guid=WritingDebugging_UM 